(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/OrderForm/OrderForm"],{"080c":function(e,t,n){"use strict";n.r(t);var o=n("b798"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"4c7f":function(e,t,n){"use strict";var o=n("af61"),a=n.n(o);a.a},"5a08":function(e,t,n){"use strict";(function(e,t){var o=n("4ea4");n("0720");o(n("66fd"));var a=o(n("5ecb"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"5ecb":function(e,t,n){"use strict";n.r(t);var o=n("973e"),a=n("080c");for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("4c7f");var r=n("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"9fdcfca0",null,!1,o["a"],void 0);t["default"]=u.exports},"973e":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={uText:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-text/u-text")]).then(n.bind(null,"24e1"))},"u-Text":function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u--text/u--text")]).then(n.bind(null,"206c"))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"5b08"))},"u-Image":function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u--image/u--image")]).then(n.bind(null,"de43"))},uLoadingIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-loading-icon/u-loading-icon")]).then(n.bind(null,"21b1"))},uNotify:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-notify/u-notify")]).then(n.bind(null,"931c"))},uModal:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-modal/u-modal")]).then(n.bind(null,"c92c"))},uLoadingPage:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-loading-page/u-loading-page")]).then(n.bind(null,"f837"))},uPicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-picker/u-picker")]).then(n.bind(null,"5fcd"))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,"f6d0"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,0!==e.address.length&&"{}"!==JSON.stringify(e.mainAddress)),o=e.__map(e.orderList,(function(t,n){var o=e.__get_orig(t),a=e._f("weight")(t.weight),i=""===t.fittings||Array.isArray(t.fittings)&&0===t.fittings.length,r=i?null:e.fitting(t),u=t.birthcard.length;return{$orig:o,f0:a,g1:i,m0:r,g2:u}}));e._isMounted||(e.e0=function(t){e.pickerData.show=!0},e.e1=function(t){e.popupData.show=!1}),e.$mp.data=Object.assign({},{$root:{g0:n,l0:o}})},i=[]},af61:function(e,t,n){},b798:function(e,t,n){"use strict";(function(e){var o=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n("2eee")),i=o(n("c973")),r=o(n("9523")),u=n("8b0d"),s=n("26cb"),c=n("1faf");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={name:"UniappDemoOrderForm",data:function(){return{modelData:{title:"",content:"",show:!1},pickerData:{show:!1,text:"请选择 ..."},columns:(0,u.columns)(),columnData:(0,u.columnData)(),chkbox:{present:{isChecked:!1}},payData:{payWay:""},popupData:{show:!1,data:{},payway:"online",paywayDetail:""},loadingPage:{show:!1}}},beforeUpdate:function(){console.log("beforeUpdate")},updated:function(){console.log("updated")},computed:d(d(d({},(0,s.mapState)("user",{isLogin:function(e){return e.isLogin},userId:function(e){return e.userId},address:function(e){return e.address},beUsedAddress:function(e){return e.beUsedAddress}})),(0,s.mapGetters)("shopCart",["orderList"])),{},{mainAddress:function(){if("{}"!==JSON.stringify(this.beUsedAddress))return this.beUsedAddress;var e={};return this.address.some((function(t,n){if(console.log(t.isDefault),1==t.isDefault)return e=t,!0})),console.log(e),e},totalPrice:function(){for(var e=0,t=0;t<this.orderList.length;t++){var n=this.orderList[t];e+=n.price*n.count}return e.toFixed(2)},actuallyPay:function(){return this.chkbox.present.isChecked?(this.totalPrice-1).toFixed(2):Number(this.totalPrice).toFixed(2)}}),created:function(){var e=this;return(0,i.default)(a.default.mark((function t(){var n,o,i;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("orderform created"),t.next=3,(0,c.reqGetAllAddress)(e.userId).catch((function(e){return e}));case 3:if(n=t.sent,1!==n.code){t.next=19;break}if(0!==n.data.length){t.next=7;break}return t.abrupt("return");case 7:e.reWriteAddress(n.data),o=0;case 9:if(!(o<n.data.length)){t.next=17;break}if(i=n.data[o],"1"!==i.isDefault){t.next=14;break}return e.reWriteBeUsedAddress(i),t.abrupt("break",17);case 14:o++,t.next=9;break;case 17:t.next=20;break;case 19:e.$notify("error",n.msg);case 20:case"end":return t.stop()}}),t)})))()},mounted:function(){e.hideTabBar({animation:!1})},onLoad:function(){return(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("orderform onload");case 1:case"end":return e.stop()}}),e)})))()},methods:d(d(d(d({},(0,s.mapMutations)(["updatePrevPage"])),(0,s.mapMutations)("user",["reWriteAddress","reWriteBeUsedAddress"])),(0,s.mapActions)(["chkAndGetToken"])),{},{goToAddressPage:function(){this.$switchPage({pageName:"Address"})},showModel:function(e){e||(this.modelData.title="配送时间说明",this.modelData.content="1.配送时间10:00-20:00<br>2.截单时间14:30",this.modelData.show=!0),"charge"===e&&(this.modelData.title="余额使用说明",this.modelData.content="1.余额最小使用单位为0.01元.<br>2.余额不可与优惠券,红包叠加使用.<br>3.使用余额抵扣部分不可开具发票.",this.modelData.show=!0),"present"===e&&(this.modelData.title="积分使用规则",this.modelData.content="1.消费时1积分可抵0.01元现金使用<br>2.使用积分抵扣部分不可开具发票",this.modelData.show=!0)},pickerConfirm:function(e){console.log(e),this.pickerData.text="".concat(e.value[0],"  ").concat(e.value[1]," ..."),this.pickerData.show=!1},modelConfirm:function(e){this.modelData.show=!1,this.modelData.title="",this.modelData.content=""},pickerCancel:function(){this.pickerData.show=!1},changeHandler:function(e){console.log("changeHnadler");var t=e.columnIndex,n=(e.value,e.values,e.index),o=e.picker,a=void 0===o?this.$refs.uPicker1:o;console.log(t),0===t&&a.setColumnValues(1,this.columnData[n])},fitting:function(e){return""===e.fittings?"":"string"===typeof e.fittings?this.curGoods.fittings:Array.isArray(e.fittings)&&0===e.fittings.length?"":"含".concat(e.fittings[51].num).concat(e.fittings[51].uname).concat(e.fittings[51].name)},chkBoxClick:function(e){"present"===e?this.chkbox[e].isChecked=!this.chkbox[e].isChecked:"weixin"===e?"微信支付"===this.popupData.paywayDetail?this.popupData.paywayDetail="":this.popupData.paywayDetail="微信支付":"zhifubao"===e&&("支付宝"===this.popupData.paywayDetail?this.popupData.paywayDetail="":this.popupData.paywayDetail="支付宝")},showPopup:function(e){var t=this;return(0,i.default)(a.default.mark((function n(){var o,i,r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.popupData.show=!0,t.loadingPage.show=!0,"payway"!==e){n.next=17;break}return n.next=5,t.chkAndGetToken().catch((function(e){return e}));case 5:if(o=n.sent,i="",1!==o.code){n.next=11;break}i=o.data["access-token"],n.next=12;break;case 11:return n.abrupt("return",t.$notify("error",o.msg));case 12:return n.next=14,(0,c.reqGetAllPayWay)(i).catch((function(e){return e}));case 14:r=n.sent,1===r.code&&(console.log(r.data),t.popupData.data=r.data),t.loadingPage.show=!1;case 17:case"end":return n.stop()}}),n)})))()},popupCancel:function(){this.popupData.show=!1},switchPayWay:function(e){var t=this;this.loadingPage.show=!0,console.log(e),this.popupData.payway=e,this.$nextTick((function(){t.loadingPage.show=!1}))},choicePayWay:function(e){this.popupData.paywayDetail=e,this.popupData.show=!1},test:function(e){console.log(e)}}),filters:{weight:function(e){return e?"(".concat(e,")"):""}}};t.default=f}).call(this,n("543d")["default"])}},[["5a08","common/runtime","common/vendor"]]]);