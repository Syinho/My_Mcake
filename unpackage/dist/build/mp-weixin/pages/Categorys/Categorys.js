(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Categorys/Categorys"],{"14a1":function(e,t,o){"use strict";(function(e){var n=o("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(o("2eee")),a=n(o("9523")),c=n(o("c973")),s=o("26cb");function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){(0,a.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var d={name:"categorys",data:function(){return{scrollLeft:0,isShowLoadError:!1,isGoTop:!1,isShowLoading:!1}},onLoad:function(){var t=this;return(0,c.default)(r.default.mark((function o(){var n,a,c;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return console.log("categorys onLoad"),e.hideTabBar({animation:!1}),o.next=4,t.chkTokenAndGetCategorys().catch((function(e){return e}));case 4:if(n=o.sent,console.log(n),1!==n.code){o.next=16;break}return a=n.data,t.updateBid(a[0].bid),t.updateCount(a[0].num),o.next=12,t.chkTokenAndGetGoodsByBidAndPage();case 12:c=o.sent,1===c.code?t.updateCurGoods(c.data.list):t.$refs.uToast.show({type:"error",icon:!1,message:c.msg,complete:function(){this.isShowLoadError=!0}}),o.next=17;break;case 16:t.$refs.uToast.show({type:"error",icon:!1,message:n.msg,complete:function(){t.isShowLoadError=!0}});case 17:case"end":return o.stop()}}),o)})))()},beforeCreate:function(){console.log("categorys beforeCreate")},created:function(){var e=this;console.log("categorys created"),this.$bus.$on("hiddenShopCartCard",(function(){e.isShowLoading=!1})),0===this.curGoods.length&&(this.isShowLoading=!0),this.$bus.$on("addShopCartSuccess",(function(t){console.log("add success"),e.isShowLoading=!1,e.$toast("success",t)})),this.$bus.$on("addShopCartFail",(function(t){console.log("add fail"),e.isShowLoading=!1,e.$toast("error",t)})),this.$bus.$on("showLoadingPage",(function(){e.isShowLoading=!0}))},onShow:function(){console.log("categorys onShow")},computed:i(i({},(0,s.mapState)("categorys",{categorys:function(e){return e.categorys},curGoods:function(e){return e.curGoods},bid:function(e){return e.bid},page:function(e){return e.page},count:function(e){return e.count}})),{},{isAllowLoad:function(){return this.curGoods.length<this.count}}),watch:{curGoods:function(e){0===e.length?this.isShowLoading=!0:this.isShowLoading=!1}},methods:i(i(i({},(0,s.mapActions)("categorys",["chkTokenAndGetCategorys","chkTokenAndGetGoodsByBidAndPage"])),(0,s.mapMutations)("categorys",["updateCurGoods","updateBid","updatePage","updateCount"])),{},{tabSelect:function(e){var t=this;return(0,c.default)(r.default.mark((function o(){var n,a,c;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n=Number(e.currentTarget.dataset.bid),n!==t.bid){o.next=5;break}return o.abrupt("return");case 5:t.updateCurGoods([]);case 6:return t.updateBid(n),t.updatePage(1),t.scrollLeft=60*(e.currentTarget.dataset.index-1),t.isGoTop=!0,o.next=12,t.chkTokenAndGetGoodsByBidAndPage();case 12:a=o.sent,1===a.code?(c=a.data,t.updateCurGoods(c.list),t.updateCount(c.count)):t.$refs.uToast.show({type:"error",icon:!1,message:a.msg,complete:function(){this.isShowLoadError=!0}});case 14:case"end":return o.stop()}}),o)})))()},loadMore:function(){var e=this;return(0,c.default)(r.default.mark((function t(){var o,n,a,c;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isAllowLoad&&!e.isShowLoadError){t.next=2;break}return t.abrupt("return");case 2:return o=e.page+1,e.updatePage(o),t.next=6,e.chkTokenAndGetGoodsByBidAndPage();case 6:n=t.sent,1===n.code?(a=n.data,c=[].concat(e.curGoods,a.list),e.updateCurGoods(c)):e.$refs.uToast.show({type:"error",icon:!1,message:n.msg,complete:function(){this.isShowLoadError=!0}});case 8:case"end":return t.stop()}}),t)})))()},handleScroll:function(){this.isGoTop=!1}}),components:{GoodItem:function(){Promise.all([o.e("common/vendor"),o.e("components/GoodItem/GoodItem")]).then(function(){return resolve(o("2c5b"))}.bind(null,o)).catch(o.oe)},FooterTab:function(){o.e("components/FooterTab/FooterTab").then(function(){return resolve(o("512f"))}.bind(null,o)).catch(o.oe)}}};t.default=d}).call(this,o("543d")["default"])},"37b4":function(e,t,o){"use strict";o.r(t);var n=o("14a1"),r=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(a);t["default"]=r.a},bacd:function(e,t,o){"use strict";o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return a})),o.d(t,"a",(function(){return n}));var n={uToast:function(){return o.e("uni_modules/uview-ui/components/u-toast/u-toast").then(o.bind(null,"472c"))},uLoadingPage:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-loading-page/u-loading-page")]).then(o.bind(null,"f837"))}},r=function(){var e=this.$createElement,t=(this._self._c,this.curGoods.length),o=!this.isShowLoadError&&this.curGoods.length>0;this.$mp.data=Object.assign({},{$root:{g0:t,g1:o}})},a=[]},bd7f:function(e,t,o){},c52b:function(e,t,o){"use strict";var n=o("bd7f"),r=o.n(n);r.a},d2a9:function(e,t,o){"use strict";(function(e,t){var n=o("4ea4");o("0720");n(o("66fd"));var r=n(o("edce"));e.__webpack_require_UNI_MP_PLUGIN__=o,t(r.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},edce:function(e,t,o){"use strict";o.r(t);var n=o("bacd"),r=o("37b4");for(var a in r)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return r[e]}))}(a);o("c52b");var c=o("f0c5"),s=Object(c["a"])(r["default"],n["b"],n["c"],!1,null,"053ee78e",null,!1,n["a"],void 0);t["default"]=s.exports}},[["d2a9","common/runtime","common/vendor"]]]);